"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define([],t("lousyLoad")):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t("lousyLoad"):e.lousyLoad=t("lousyLoad")}(window,function(e){var t={immediate:!0},n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},i=function(){function i(o,r){_classCallCheck(this,i),this.utils={debounce:function(e,t,n){var i=void 0;return function(){var o=this,r=arguments,a=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(o,r)},t),a&&e.apply(o,r)}},wrapElement:function(e,t){t.length||(t=[t]);for(var n=t.length-1;n>=0;n--){var i=n>0?e.cloneNode(!0):e,o=t[n],r=o.parentNode,a=o.nextSibling;i.appendChild(o),a?r.insertBefore(i,a):r.appendChild(i)}}},this.element=o,this._defaults=t,this._name=e,this.options=n(t,r),this.options.immediate&&this.init()}return _createClass(i,[{key:"init",value:function(){var e=this.element.querySelectorAll("img");return e.forEach(this.prepareImage.bind(this)),e}},{key:"prepareImage",value:function(e){var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=function(e){var t=window.getComputedStyle(e).getPropertyValue("max-width"),n=e.getAttribute("width"),i=e.getAttribute("height"),o=n/i;return t&&(t.indexOf("%")>-1?t=e.parentElement.offsetWidth:t.indexOf("px")>-1&&(t=t.replace("px","")),Number(n)>Number(t)&&(n=t,i=t/o)),{width:n,height:i,maxWidth:t,aspectRatio:o}}(e),i=document.createElement("span");i.classList.add("ll-image_wrapper"),i.style.width=n.width+"px",i.style.height=n.height+"px",i.style.display="inline-block",e.classList.add("ll-image"),e.style.width=n.width+"px",e.style.height=n.height+"px",this.utils.wrapElement(i,e),e.onload=function(){console.log("loaded"),e.parentElement.classList.add("is-loaded")},e.offsetTop<document.documentElement.scrollTop+t-100&&(console.log("setting to "+e.getAttribute("data-src")),e.src=e.getAttribute("data-src"))}}]),i}();if(window.jQuery){var o=window.jQuery;o.fn[e]=function(t){return t=t||{},this.each(function(){o.data(this,"plugin_"+e)||(t.element=this,o.data(this,"plugin_"+e,new i(this,t)))})}}return i});